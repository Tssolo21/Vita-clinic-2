<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="using:Avalonia.Controls"
             x:Class="VitaClinic.WebAPI.Views.ClientsView">

    <UserControl.Styles>
        <!-- Enhanced fade-in animation -->
        <Style Selector="UserControl">
            <Setter Property="Opacity" Value="0"/>
            <Style.Animations>
                <Animation Duration="0:0:0.5" Easing="CubicEaseOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="Opacity" Value="0"/>
                        <Setter Property="TranslateTransform.Y" Value="20"/>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="1"/>
                        <Setter Property="TranslateTransform.Y" Value="0"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <!-- Search Field Focus Animation -->
        <Style Selector="TextBox.search-field">
            <Setter Property="Background" Value="#F9FAFB"/>
            <Setter Property="BorderBrush" Value="#E5E7EB"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.2" Easing="CubicEaseOut"/>
                    <BrushTransition Property="BorderBrush" Duration="0:0:0.2" Easing="CubicEaseOut"/>
                    <TransformTransition Property="RenderTransform" Duration="0:0:0.2" Easing="CubicEaseOut"/>
                </Transitions>
            </Setter>
        </Style>

        <Style Selector="TextBox.search-field:focus">
            <Style.Animations>
                <Animation Duration="0:0:0.2" Easing="CubicEaseOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="Background" Value="#F9FAFB"/>
                        <Setter Property="BorderBrush" Value="#E5E7EB"/>
                        <Setter Property="BoxShadow" Value="none"/>
                        <Setter Property="ScaleTransform.ScaleX" Value="1"/>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="Background" Value="White"/>
                        <Setter Property="BorderBrush" Value="#3B82F6"/>
                        <Setter Property="BoxShadow" Value="0 0 0 3 rgba(59, 130, 246, 0.1)"/>
                        <Setter Property="ScaleTransform.ScaleX" Value="1.02"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <!-- Client Card Hover Effect -->
        <Style Selector="Border.client-card">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BoxShadow" Value="0 2 8 rgba(0,0,0,0.1)"/>
            <Setter Property="Transitions">
                <Transitions>
                    <TransformTransition Property="RenderTransform" Duration="0:0:0.15" Easing="CubicEaseOut"/>
                    <BoxShadowTransition Property="BoxShadow" Duration="0:0:0.15" Easing="CubicEaseOut"/>
                </Transitions>
            </Setter>
        </Style>

        <Style Selector="Border.client-card:pointerover">
            <Style.Animations>
                <Animation Duration="0:0:0.15" Easing="CubicEaseOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="TranslateTransform.Y" Value="0"/>
                        <Setter Property="BoxShadow" Value="0 2 8 rgba(0,0,0,0.1)"/>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="TranslateTransform.Y" Value="-2"/>
                        <Setter Property="BoxShadow" Value="0 8 16 rgba(0,0,0,0.15)"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <!-- Filter Button Animation -->
        <Style Selector="Button.filter-button">
            <Setter Property="Background" Value="#F3F4F6"/>
            <Setter Property="BorderBrush" Value="#E5E7EB"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.2" Easing="CubicEaseOut"/>
                    <BrushTransition Property="BorderBrush" Duration="0:0:0.2" Easing="CubicEaseOut"/>
                </Transitions>
            </Setter>
        </Style>

        <Style Selector="Button.filter-button:pointerover">
            <Style.Animations>
                <Animation Duration="0:0:0.2" Easing="CubicEaseOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="Background" Value="#F3F4F6"/>
                        <Setter Property="BorderBrush" Value="#E5E7EB"/>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="Background" Value="#EBF8FF"/>
                        <Setter Property="BorderBrush" Value="#3B82F6"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="Button.filter-button.active">
            <Setter Property="Background" Value="#3B82F6"/>
            <Setter Property="BorderBrush" Value="#1D4ED8"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <!-- Alert Badge Pulse Animation -->
        <Style Selector="Border.alert-badge">
            <Style.Animations>
                <Animation Duration="0:0:2" FillBehavior="Stop" Easing="CubicEaseInOut" IterationCount="3">
                    <KeyFrame Cue="0%">
                        <Setter Property="Opacity" Value="1"/>
                        <Setter Property="ScaleTransform.ScaleX" Value="1"/>
                        <Setter Property="ScaleTransform.ScaleY" Value="1"/>
                    </KeyFrame>
                    <KeyFrame Cue="25%">
                        <Setter Property="Opacity" Value="0.7"/>
                        <Setter Property="ScaleTransform.ScaleX" Value="1.1"/>
                        <Setter Property="ScaleTransform.ScaleY" Value="1.1"/>
                    </KeyFrame>
                    <KeyFrame Cue="50%">
                        <Setter Property="Opacity" Value="1"/>
                        <Setter Property="ScaleTransform.ScaleX" Value="1"/>
                        <Setter Property="ScaleTransform.ScaleY" Value="1"/>
                    </KeyFrame>
                    <KeyFrame Cue="75%">
                        <Setter Property="Opacity" Value="0.7"/>
                        <Setter Property="ScaleTransform.ScaleX" Value="1.1"/>
                        <Setter Property="ScaleTransform.ScaleY" Value="1.1"/>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="1"/>
                        <Setter Property="ScaleTransform.ScaleX" Value="1"/>
                        <Setter Property="ScaleTransform.ScaleY" Value="1"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <!-- Filter Application Animation -->
        <Style Selector="Border.filtering">
            <Style.Animations>
                <Animation Duration="0:0:0.3" Easing="CubicEaseOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="Opacity" Value="1"/>
                    </KeyFrame>
                    <KeyFrame Cue="50%">
                        <Setter Property="Opacity" Value="0.5"/>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="1"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <!-- Staggered Client Animations -->
        <Style Selector="ItemsControl > ContentPresenter:nth-child(1) > Border">
            <Style.Animations>
                <Animation Duration="0:0:0.4" BeginTime="0:0:0.0" Easing="CubicEaseOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="Opacity" Value="0"/>
                        <Setter Property="TranslateTransform.Y" Value="30"/>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="1"/>
                        <Setter Property="TranslateTransform.Y" Value="0"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="ItemsControl > ContentPresenter:nth-child(2) > Border">
            <Style.Animations>
                <Animation Duration="0:0:0.4" BeginTime="0:0:0.1" Easing="CubicEaseOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="Opacity" Value="0"/>
                        <Setter Property="TranslateTransform.Y" Value="30"/>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="1"/>
                        <Setter Property="TranslateTransform.Y" Value="0"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="ItemsControl > ContentPresenter:nth-child(3) > Border">
            <Style.Animations>
                <Animation Duration="0:0:0.4" BeginTime="0:0:0.2" Easing="CubicEaseOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="Opacity" Value="0"/>
                        <Setter Property="TranslateTransform.Y" Value="30"/>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="1"/>
                        <Setter Property="TranslateTransform.Y" Value="0"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>
    </UserControl.Styles>

    <StackPanel Margin="20">
        <!-- Header with animation -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
            <StackPanel.Styles>
                <Style Selector="StackPanel">
                    <Style.Animations>
                        <Animation Duration="0:0:0.6" BeginTime="0:0:0.2" Easing="CubicEaseOut">
                            <KeyFrame Cue="0%">
                                <Setter Property="Opacity" Value="0"/>
                                <Setter Property="TranslateTransform.X" Value="-20"/>
                            </KeyFrame>
                            <KeyFrame Cue="100%">
                                <Setter Property="Opacity" Value="1"/>
                                <Setter Property="TranslateTransform.X" Value="0"/>
                            </KeyFrame>
                        </Animation>
                    </Style.Animations>
                </Style>
            </StackPanel.Styles>
            <TextBlock Text="ðŸ‘¥" FontSize="32" Margin="0,0,12,0" VerticalAlignment="Center"/>
            <StackPanel VerticalAlignment="Center">
                <TextBlock Text="Clients Management" FontSize="28" FontWeight="Bold" Foreground="#1F2937"/>
                <TextBlock Text="Manage pet owners and client information" FontSize="14" Foreground="#6B7280" Margin="0,4,0,0"/>
            </StackPanel>
        </StackPanel>

        <!-- Search and Filter Section -->
        <Border Background="#F9FAFB" CornerRadius="12" Margin="0,0,0,20" Padding="20" Classes="card">
            <StackPanel>
                <!-- Search Field -->
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBox Name="SearchBox" Grid.Column="0"
                             Watermark="Search clients by name, email, or phone..."
                             Classes="search-field"
                             Padding="16,12"
                             CornerRadius="8"
                             FontSize="14"
                             Margin="0,0,12,0"/>

                    <Button Grid.Column="1" Content="ðŸ” Search" Background="#6366F1" Foreground="White"
                            Padding="16,12" CornerRadius="8" Classes="card"/>
                </Grid>

                <!-- Filter Buttons -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                    <TextBlock Text="Quick Filters:" VerticalAlignment="Center" Margin="0,0,12,0"
                               Foreground="#6B7280" FontWeight="Bold"/>
                    <Button Name="AllClientsFilter" Content="All Clients" Classes="filter-button"
                            Padding="12,8" Margin="0,0,8,0" CornerRadius="6"/>
                    <Button Name="ActiveFilter" Content="Active" Classes="filter-button"
                            Padding="12,8" Margin="0,0,8,0" CornerRadius="6"/>
                    <Button Name="NewFilter" Content="New" Classes="filter-button"
                            Padding="12,8" Margin="0,0,8,0" CornerRadius="6"/>
                    <Button Name="VIPFilter" Content="VIP" Classes="filter-button"
                            Padding="12,8" CornerRadius="6"/>
                </StackPanel>

                <!-- Search Results Info -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                    <TextBlock Name="ResultsCount" Text="Showing 24 clients" FontSize="12" Foreground="#6B7280"/>
                    <TextBlock Text="â€¢" Margin="8,0" Foreground="#D1D5DB"/>
                    <TextBlock Name="FilterStatus" Text="No filters applied" FontSize="12" Foreground="#6B7280"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Action Buttons -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
            <StackPanel.Styles>
                <Style Selector="StackPanel">
                    <Style.Animations>
                        <Animation Duration="0:0:0.6" BeginTime="0:0:0.3" Easing="CubicEaseOut">
                            <KeyFrame Cue="0%">
                                <Setter Property="Opacity" Value="0"/>
                                <Setter Property="TranslateTransform.Y" Value="20"/>
                            </KeyFrame>
                            <KeyFrame Cue="100%">
                                <Setter Property="Opacity" Value="1"/>
                                <Setter Property="TranslateTransform.Y" Value="0"/>
                            </KeyFrame>
                        </Animation>
                    </Style.Animations>
                </Style>
            </StackPanel.Styles>
            <Button Name="BackButton" Content="â¬…ï¸ Back to Dashboard" Click="GoBack"
                    Background="#6B7280" Foreground="White" Padding="12,8" Margin="0,0,10,0"
                    Classes="card"/>
            <Button Name="AddClientButton" Content="âž• Add New Client" Click="AddClient"
                    Background="#6366F1" Foreground="White" Padding="12,8" Margin="0,0,10,0"
                    Classes="card"/>
            <Button Name="RefreshButton" Content="ðŸ”„ Refresh" Click="LoadClients"
                    Background="#10B981" Foreground="White" Padding="12,8"
                    Classes="card"/>
        </StackPanel>

        <!-- Clients List -->
        <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
            <ItemsControl Name="ClientsList" ItemsSource="{Binding Clients}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="#E5E7EB" BorderThickness="2" CornerRadius="12" Margin="8"
                                Padding="20" Background="White" Classes="client-card">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Client Avatar -->
                                <Border Grid.Column="0"
                                        Width="64" Height="64"
                                        CornerRadius="32"
                                        Background="#F3F4F6"
                                        Margin="0,0,16,0"
                                        VerticalAlignment="Top"
                                        HorizontalAlignment="Left">
                                    <TextBlock Text="ðŸ‘¤" FontSize="24" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>

                                <!-- Client Content -->
                                <StackPanel Grid.Column="1">
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                        <TextBlock Text="Client #" FontSize="12" FontWeight="Bold" Foreground="#6B7280"/>
                                        <TextBlock Text="{Binding Id}" FontSize="12" FontWeight="Bold" Foreground="#374151" Margin="4,0,12,0"/>
                                        <!-- VIP Badge -->
                                        <Border Background="#FEF3C7" CornerRadius="12" Padding="8,4" Margin="8,0,0,0"
                                                IsVisible="{Binding IsVIP, FallbackValue=False}">
                                            <TextBlock Text="VIP" FontSize="10" Foreground="#92400E" FontWeight="Bold"/>
                                        </Border>
                                        <!-- New Client Badge -->
                                        <Border Background="#DCFCE7" CornerRadius="12" Padding="8,4" Margin="8,0,0,0"
                                                IsVisible="{Binding IsNew, FallbackValue=False}" Classes="alert-badge">
                                            <TextBlock Text="NEW" FontSize="10" Foreground="#166534" FontWeight="Bold"/>
                                        </Border>
                                    </StackPanel>

                                    <TextBlock Text="{Binding FirstName}" FontSize="20" FontWeight="Bold"
                                               Foreground="#1F2937" Margin="0,0,0,4"/>
                                    <TextBlock Text="{Binding LastName}" FontSize="18" FontWeight="SemiBold"
                                               Foreground="#374151" Margin="0,0,0,8"/>

                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0">
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                                <TextBlock Text="ðŸ“§" FontSize="12" Margin="0,0,4,0"/>
                                                <TextBlock Text="Email:" FontSize="12" FontWeight="Bold" Foreground="#6B7280"/>
                                                <TextBlock Text="{Binding Email}" FontSize="12" Foreground="#374151" Margin="4,0,0,0"/>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="ðŸ“±" FontSize="12" Margin="0,0,4,0"/>
                                                <TextBlock Text="Phone:" FontSize="12" FontWeight="Bold" Foreground="#6B7280"/>
                                                <TextBlock Text="{Binding Phone}" FontSize="12" Foreground="#374151" Margin="4,0,0,0"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="16,0,0,0">
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                                <TextBlock Text="ðŸ¢" FontSize="12" Margin="0,0,4,0"/>
                                                <TextBlock Text="Status:" FontSize="12" FontWeight="Bold" Foreground="#6B7280"/>
                                                <Border Background="#DCFCE7" CornerRadius="4" Padding="4,2" Margin="4,0,0,0">
                                                    <TextBlock Text="{Binding Status}" FontSize="10" Foreground="#166534" FontWeight="Bold"/>
                                                </Border>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="ðŸ“…" FontSize="12" Margin="0,0,4,0"/>
                                                <TextBlock Text="Since:" FontSize="12" FontWeight="Bold" Foreground="#6B7280"/>
                                                <TextBlock Text="{Binding CreatedDate, StringFormat=' {0:MMM yyyy}'}" FontSize="12" Foreground="#374151" Margin="4,0,0,0"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Grid>

                                    <!-- Pets Count -->
                                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                        <TextBlock Text="ðŸ¾" FontSize="12" Margin="0,0,4,0"/>
                                        <TextBlock Text="Pets:" FontSize="12" FontWeight="Bold" Foreground="#6B7280"/>
                                        <TextBlock Text="{Binding PetCount, FallbackValue=3}" FontSize="12" Foreground="#374151" Margin="4,0,0,0"/>
                                        <TextBlock Text="registered" FontSize="12" Foreground="#6B7280" Margin="4,0,0,0"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Action Buttons -->
                                <StackPanel Grid.Column="2" Orientation="Vertical" VerticalAlignment="Top" Margin="16,0,0,0">
                                    <Button Content="âœï¸ Edit" Padding="12,8" Margin="0,0,0,8"
                                            Background="#6366F1" Foreground="White" CornerRadius="8"
                                            Click="EditClient" Tag="{Binding Id}"
                                            Classes="card"/>
                                    <Button Content="ðŸ—‘ï¸ Delete" Padding="12,8"
                                            Background="#EF4444" Foreground="White" CornerRadius="8"
                                            Click="DeleteClient" Tag="{Binding Id}"
                                            Classes="card"/>
                                    <Button Content="ðŸ“‹ View" Padding="12,8" Margin="0,8,0,0"
                                            Background="#10B981" Foreground="White" CornerRadius="8"
                                            Classes="card"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </StackPanel>
</UserControl>
