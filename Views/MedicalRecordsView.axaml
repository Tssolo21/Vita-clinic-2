<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="VitaClinic.WebAPI.Views.MedicalRecordsView">
    <UserControl.Styles>
        <Style Selector="UserControl">
            <Setter Property="Opacity" Value="0"/>
            <Style.Animations>
                <Animation Duration="0:0:0.5" Easing="CubicEaseOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="Opacity" Value="0"/>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="1"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <!-- Border fade-in animation - disabled for now -->
        <Style Selector="Border">
            <Setter Property="Opacity" Value="1"/>
        </Style>
    </UserControl.Styles>
    <StackPanel Margin="20">
        <TextBlock Text="Medical Records Management" FontSize="28" FontWeight="Bold" Margin="0,0,0,20"/>
        
        <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
            <Button Name="BackButton" Content="â¬…ï¸ Back to Dashboard" Click="GoBack"
                    Background="#6B7280" Foreground="White" Padding="12,8" Margin="0,0,10,0"/>
            <Button Name="AddMedicalRecordButton" Content="âž• Add Medical Record" Click="AddMedicalRecord"
                    Background="#6366F1" Foreground="White" Padding="12,8" Margin="0,0,10,0"/>
            <Button Name="RefreshButton" Content="ðŸ”„ Refresh" Click="LoadMedicalRecords"
                    Background="#10B981" Foreground="White" Padding="12,8"/>
        </StackPanel>
        
        <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
            <ItemsControl Name="MedicalRecordsList" ItemsSource="{Binding MedicalRecords}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="#E5E7EB" BorderThickness="2" CornerRadius="8" Margin="8" Padding="16" Background="White"
                                BoxShadow="0 2 4 0 rgba(0,0,0,0.1)">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Medical Record Content -->
                                <StackPanel Grid.Column="0">
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                        <TextBlock Text="Record #" FontSize="14" FontWeight="Bold" Foreground="#6B7280"/>
                                        <TextBlock Text="{Binding Id}" FontSize="14" FontWeight="Bold" Foreground="#374151" Margin="4,0,0,0"/>
                                    </StackPanel>

                                    <TextBlock Text="{Binding Animal.Name, StringFormat='Patient: {0}'}" FontSize="16" FontWeight="Bold"
                                               Foreground="#1F2937" Margin="0,0,0,8"/>

                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0">
                                            <TextBlock Text="Diagnosis:" FontSize="12" FontWeight="Bold" Foreground="#6B7280"/>
                                            <TextBlock Text="{Binding Diagnosis}" FontSize="14" TextWrapping="Wrap" Margin="0,2,0,0"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="16,0,0,0">
                                            <TextBlock Text="Treatment:" FontSize="12" FontWeight="Bold" Foreground="#6B7280"/>
                                            <TextBlock Text="{Binding Treatment}" FontSize="14" TextWrapping="Wrap" Margin="0,2,0,0"/>
                                        </StackPanel>
                                    </Grid>

                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0">
                                            <TextBlock Text="Medication:" FontSize="12" FontWeight="Bold" Foreground="#6B7280"/>
                                            <TextBlock Text="{Binding Medication}" FontSize="14" TextWrapping="Wrap" Margin="0,2,0,0"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="16,0,0,0">
                                            <TextBlock Text="Notes:" FontSize="12" FontWeight="Bold" Foreground="#6B7280"/>
                                            <TextBlock Text="{Binding Notes}" FontSize="14" TextWrapping="Wrap" Margin="0,2,0,0"/>
                                        </StackPanel>
                                    </Grid>

                                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                        <TextBlock Text="Record Date:" FontSize="12" FontWeight="Bold" Foreground="#6B7280"/>
                                        <TextBlock Text="{Binding RecordDate, StringFormat=' {0:g}'}" FontSize="12" Foreground="#374151"/>
                                        <TextBlock Text="Next Checkup:" FontSize="12" FontWeight="Bold" Foreground="#6B7280" Margin="16,0,0,0"/>
                                        <TextBlock Text="{Binding NextCheckupDate, StringFormat=' {0:d}', FallbackValue=' Not scheduled'}" FontSize="12" Foreground="#374151"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Action Buttons -->
                                <StackPanel Grid.Column="1" Orientation="Vertical" VerticalAlignment="Top" Margin="16,0,0,0">
                                    <Button Content="âœï¸ Edit" Padding="12,6" Margin="0,0,0,8" Background="#3B82F6" Foreground="White"
                                            Click="EditMedicalRecord" Tag="{Binding Id}"/>
                                    <Button Content="ðŸ—‘ï¸ Delete" Padding="12,6" Background="#EF4444" Foreground="White"
                                            Click="DeleteMedicalRecord" Tag="{Binding Id}"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </StackPanel>
</UserControl>
